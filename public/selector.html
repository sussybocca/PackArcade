<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Selector ¬∑ Immersive UI</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
    }

    body {
      font-family: 'Inter', sans-serif;
      color: #eef2ff;
      line-height: 1.5;
      position: relative;
      display: flex;
      flex-direction: column;
      background: radial-gradient(circle at 10% 20%, rgba(45, 40, 75, 0.8), #0b0e17 80%);
    }

    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
      pointer-events: none;
      opacity: 0.7;
    }

    body::before {
      content: '';
      position: fixed;
      width: 70vmax;
      height: 70vmax;
      top: 10vh;
      right: -10vw;
      background: radial-gradient(circle, rgba(100, 80, 220, 0.2) 0%, transparent 70%);
      border-radius: 50%;
      z-index: 0;
      pointer-events: none;
      filter: blur(80px);
    }

    body::after {
      content: '';
      position: fixed;
      width: 60vmin;
      height: 60vmin;
      bottom: 0;
      left: 0;
      background: radial-gradient(circle, rgba(180, 130, 255, 0.15) 0%, transparent 70%);
      border-radius: 50%;
      z-index: 0;
      pointer-events: none;
      filter: blur(70px);
    }

    .container {
      width: 100%;
      height: 100%;
      padding: 0.5rem 0.8rem 0.8rem 0.8rem;
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    /* ----- ULTRA ADVANCED AUDIO MIXER PANEL ----- */
   .mixer-panel {
  background: rgba(15, 20, 35, 0.9);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 40px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  display: flex;
  gap: 1rem;
  overflow-x: auto;
  overflow-y: auto;            /* ‚Üê new */
  max-height: 600px;           /* ‚Üê new */
  box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.7);
}

    .mixer-channel {
      min-width: 200px;
      background: rgba(0,0,0,0.3);
      border-radius: 30px;
      padding: 1rem 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      border: 1px solid rgba(255,255,255,0.05);
      backdrop-filter: blur(4px);
    }

    .channel-header {
      text-align: center;
      font-weight: 600;
      color: #b1b9d9;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 0.8rem;
      padding-bottom: 0.3rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .control-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
    }

    .control-label {
      font-size: 0.7rem;
      color: #929cce;
      width: 45px;
    }

    input[type=range] {
      flex: 1;
      height: 4px;
      background: rgba(255,255,255,0.1);
      border-radius: 2px;
      -webkit-appearance: none;
    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #a678ff;
      cursor: pointer;
      box-shadow: 0 0 8px #a678ff;
    }

    .eq-row {
      display: flex;
      gap: 0.3rem;
      justify-content: space-between;
    }

    .eq-band {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 0.6rem;
      color: #b1b9d9;
    }

    .button-group {
      display: flex;
      gap: 0.3rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .mixer-btn {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 0.3rem 0.6rem;
      font-size: 0.65rem;
      color: #b1b9d9;
      cursor: pointer;
      transition: all 0.2s;
      min-width: 45px;
    }

    .mixer-btn:hover {
      background: rgba(255,255,255,0.15);
      color: white;
    }

    .mixer-btn.active {
      background: #4a40bf;
      color: white;
    }

    .master-channel {
      min-width: 220px;
      background: linear-gradient(145deg, #2f2a60, #282350);
      border: 1px solid #a28eff;
    }

    .filter-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
      justify-content: center;
      background: rgba(15, 20, 35, 0.6);
      backdrop-filter: blur(16px);
      padding: 0.8rem 1.2rem;
      border-radius: 60px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      flex-shrink: 0;
    }

    .filter-btn {
      background: transparent;
      border: none;
      color: #b1b9d9;
      font-weight: 500;
      font-size: 0.9rem;
      padding: 0.5rem 1.2rem;
      border-radius: 40px;
      cursor: pointer;
      transition: all 0.2s;
      backdrop-filter: blur(4px);
    }

    .filter-btn:hover {
      background: rgba(255, 255, 255, 0.05);
      color: white;
    }

    .filter-btn.active {
      background: linear-gradient(145deg, #4a40bf, #7a5be8);
      color: white;
      box-shadow: 0 8px 18px -6px #4a40bf80;
      font-weight: 600;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1rem;
      perspective: 1200px;
      flex: 1;
      align-content: start;
    }

    .card {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.03);
      border-radius: 28px;
      padding: 1.5rem 1.2rem 1.5rem 1.2rem;
      box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.6), inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      transition: all 0.35s cubic-bezier(0.2, 0.9, 0.3, 1);
      display: flex;
      flex-direction: column;
      transform-style: preserve-3d;
      cursor: pointer;
      color: #eef2ff;
      position: relative;
      overflow: hidden;
      height: fit-content;
    }

    .card:hover {
      transform: translateY(-6px) rotateX(2deg) rotateY(1deg);
      background: rgba(30, 35, 60, 0.8);
      border-color: rgba(140, 120, 255, 0.3);
      box-shadow: 0 30px 60px -15px #000000cc, 0 0 0 2px rgba(140, 120, 255, 0.2) inset;
    }

    .card.highlight {
      background: linear-gradient(145deg, #2f2a60, #282350);
      border: 1px solid #a28eff55;
      box-shadow: 0 25px 45px -12px #6240ff, 0 0 0 1px #b5a0ff inset;
    }

    .card.highlight::after {
      content: '‚òÖ FEATURED';
      position: absolute;
      top: 10px;
      right: 12px;
      background: #ffd966cc;
      backdrop-filter: blur(4px);
      color: #1a142b;
      font-size: 0.65rem;
      font-weight: 700;
      padding: 0.2rem 0.9rem;
      border-radius: 40px;
      letter-spacing: 0.5px;
    }

    .card-icon {
      font-size: 2.8rem;
      line-height: 1;
      margin-bottom: 0.8rem;
      filter: drop-shadow(0 8px 12px #00000050);
    }

    .card-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: linear-gradient(to right, #fff, #d2c9ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.3;
    }

    .card-desc {
      font-size: 0.9rem;
      color: #b9c2e8;
      margin-bottom: 1.2rem;
      line-height: 1.5;
      flex: 1;
    }

    .features {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 1.5rem;
    }

    .feature-tag {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 40px;
      padding: 0.2rem 0.9rem;
      font-size: 0.75rem;
      font-weight: 500;
      color: #cbd0ec;
      backdrop-filter: blur(2px);
    }

    .card-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.5rem 1.1rem;
      font-size: 0.85rem;
      font-weight: 500;
      color: #ffffffdd;
      text-decoration: none;
      transition: all 0.2s;
      margin-top: auto;
      align-self: flex-start;
      backdrop-filter: blur(4px);
    }

    .card-link:hover {
      background: #5e50dc;
      border-color: #a88eff;
      box-shadow: 0 6px 14px #3f2db0;
      gap: 0.8rem;
    }

    .card-link span {
      font-size: 1rem;
    }

    .category-badge {
      position: absolute;
      bottom: 15px;
      right: 16px;
      font-size: 0.65rem;
      text-transform: uppercase;
      background: rgba(255,255,255,0.02);
      padding: 0.2rem 0.7rem;
      border-radius: 30px;
      color: #929cce;
      border: 1px solid rgba(255,255,255,0.05);
      letter-spacing: 0.3px;
    }

    .empty-message {
      text-align: center;
      padding: 3rem 1.5rem;
      background: rgba(0,0,0,0.2);
      border-radius: 48px;
      backdrop-filter: blur(8px);
      border: 1px dashed #536;
      font-size: 1.1rem;
      color: #a8b2e0;
    }

    /* ===== INDEPENDENT CONTROL SECTIONS (unchanged) ===== */
    .music-controls {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 100;
      display: flex;
      gap: 0.8rem;
      align-items: center;
    }

    #music-toggle {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.7rem 1.2rem;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.6);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      line-height: 1;
    }

    #music-toggle:hover {
      background: rgba(50, 55, 80, 0.9);
      border-color: rgba(180, 130, 255, 0.5);
      transform: scale(1.05);
    }

    #music-toggle span {
      font-size: 0.9rem;
      font-weight: 500;
    }

    #song-select {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.7rem 1.2rem;
      color: white;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.6);
      transition: all 0.2s;
      max-width: 200px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #song-select option {
      background: #1a1f33;
      color: white;
    }

    .funny-controls {
      position: fixed;
      bottom: 100px;
      left: 20px;
      z-index: 100;
      display: flex;
      gap: 0.8rem;
      align-items: center;
    }

    #funny-toggle {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.7rem 1.2rem;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.6);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      line-height: 1;
    }

    #funny-toggle span {
      font-size: 0.9rem;
      font-weight: 500;
    }

    .human-controls {
      position: fixed;
      bottom: 180px;
      left: 20px;
      z-index: 100;
      display: flex;
      gap: 0.8rem;
      align-items: center;
    }

    #human-toggle {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.7rem 1.2rem;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.6);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      line-height: 1;
    }

    #human-toggle span {
      font-size: 0.9rem;
      font-weight: 500;
    }

    .fx-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 100;
      display: flex;
      gap: 0.8rem;
      align-items: center;
    }

    #fx-toggle {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.7rem 1.2rem;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.6);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      line-height: 1;
    }

    #fx-toggle span {
      font-size: 0.9rem;
      font-weight: 500;
    }

    #fx-select {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.7rem 1.2rem;
      color: white;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.6);
      transition: all 0.2s;
      max-width: 200px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #fx-select option {
      background: #1a1f33;
      color: white;
    }

    #human-select, #funny-select {
      background: rgba(20, 25, 45, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 40px;
      padding: 0.7rem 1.2rem;
      color: white;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.6);
      transition: all 0.2s;
      max-width: 200px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    @media (max-width: 600px) {
      .container { padding: 0.3rem; }
      .filter-bar { padding: 0.6rem 1rem; }
      .cards-grid { gap: 0.8rem; }
      .music-controls, .funny-controls, .human-controls, .fx-controls {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      .music-controls { bottom: 20px; }
      .funny-controls { bottom: 120px; }
      .human-controls { bottom: 220px; }
      #song-select, #fx-select, #human-select, #funny-select { max-width: 150px; }
      .mixer-panel { flex-direction: column; align-items: stretch; }
    }
  </style>
</head>
<body>

  <video id="bg-video" autoplay muted loop playsinline>
    <source src="Videos/bg.mp4" type="video/mp4">
  </video>

  
  <audio id="lobby-music" loop preload="auto" crossorigin="anonymous"></audio>
  <audio id="arcade-fx" loop preload="auto" crossorigin="anonymous"></audio>
  <audio id="funny-sounds" loop preload="auto" crossorigin="anonymous"></audio>
  <audio id="human-sounds" loop preload="auto" crossorigin="anonymous"></audio>

  <div class="container">
    
    
    <div class="mixer-panel" id="mixerPanel">
      
    </div>

    
    <script>
      const cardsData = [
  {
    icon: "üåå",
    title: "Nebula Drifter",
    description: "Pilot your ship through living starscapes. Collect cosmic energy and avoid black holes.",
    features: [
      "Open world",
      "Space",
      "Atmospheric"
    ],
    link: "imagine/nebula-drifter.html",
    category: "games",
    highlight: true
  },
  {
    icon: "üèØ",
    title: "Echoes of the Samurai",
    description: "Step into feudal Japan. Every decision reshapes the timeline.",
    features: [
      "RPG",
      "Historical",
      "Branching story"
    ],
    link: "imagine/echoes-samurai.html",
    category: "interactive",
    highlight: false
  },
  {
    icon: "üß©",
    title: "Quantum Puzzles",
    description: "Manipulate particles to solve physics‚Äëdefying puzzles. 50+ levels.",
    features: [
      "Brain teaser",
      "Minimalist",
      "Quantum"
    ],
    link: "imagine/quantum-puzzles.html",
    category: "puzzle",
    highlight: false
  },
  {
    icon: "üèùÔ∏è",
    title: "Luma Island VR",
    description: "Relax on a glowing tropical island. Build, fish, and discover ancient secrets.",
    features: [
      "VR supported",
      "Relaxing",
      "Crafting"
    ],
    link: "imagine/luma-island.html",
    category: "experience",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "2048",
    description: "Join the numbers and get to the 2048 tile!‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/2048.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "8ballclassic HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/8ballclassic.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "CDN Game Editor & Explore",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/CDN.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "PackCDN ¬∑ CDN Pack Maker",
    description: "Your custom message here.‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/CDN_InstantCreator/PACK_QRCODE.htm",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "PackCDN ¬∑ Pack Details",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/CDN_InstantCreator/pack-info.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "capybaraclicker HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/CapyBaraClicker/capybaraclicker.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "FSX Language Editor ‚Äì External Runtime",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/FSX/FSX_EDITOR_.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "FOX ¬∑ apex predator",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/Fox/Custom/Fox.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "GameImpossible ‚Äì The Ultimate Maze",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/GameImpossible-Private/index.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "HSX Advanced Editor",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/HSX/hsx-editor.htm",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Pack Studio ¬∑ Advanced File Editor",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/Pack/Custom-Lange/Editor.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "PARCORE ¬∑ maze rush ¬∑ fly & upgrade",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/ParCoreSim.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Pack Popup Creator ¬∑ Manifest Generator",
    description: "This pack adds epic levels and items. Check it out!‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/PopUpManger/Popup-creator.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "ROAD CHASE ¬∑ just run them down",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/RoadChase.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "run HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/Run/Runner/run.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "üöÄ SPACE SHOOTERS ¬∑ upgrade & blast",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/SpaceShooters.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "‚óÄ SPACE SHOOTERS ‚ñ∂ ¬∑ ANALOG HORROR ¬∑ CRT-3000",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/SpaceShooters2/index.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "SpaceShooters ‚Äì Menu",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/SpaceShooters2/main.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "SPACESHOOTERS ¬∑ ARCADE MENU",
    description: "‚Üí ARROWS or WASD : move ship‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/SpaceShooters2/menu.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "SpaceShooters ‚Äì Options",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/SpaceShooters2/options.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "crossyroad HTM",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/TinyFishing/Games/ETC/crossyroad.htm",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "ducklife HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/TinyFishing/Games/ETC/ducklife.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "tinyfishing HTML",
    description: "Your browser doesn't support HTML5 canvas.‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/TinyFishing/Games/ETC/tinyfishing.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "ageofwar HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/ageofwar.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "amongus HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/amongus.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "angrybirds HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/angrybirds.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "basketbros HTML",
    description: "Loading...‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/basketbros.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "bitlife HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/bitlife.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "bloonsTD HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/bloonsTD.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "brick breaker HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/brick-breaker.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "cookieclicker HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/cookieclicker.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "PackCDN ¬∑ PURE THREE.JS GAME ¬∑ CONTROLS WORK",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/deepseek_html_20260216_42dccb.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Flappy Bird",
    description: "‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/flappybird.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "fnaf HTML",
    description: "‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/fnaf.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Ghost Clicker 3D - Immersive Spectral Hunting",
    description: "Enter a spectral dimension where ghosts drift in 3D space. Use your cursor to banish them in this immersive haunting experience!‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/ghost.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "JavaMods",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/index (1).html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Subway Surfers",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/index (2).html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Ïû•Í∏∞",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/janggi.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "ÏùºÏ†ïÍ¥ÄÎ¶¨",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/kanban.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "maze HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/maze.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Gomoku",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/omok.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "stack HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/stack.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Tetris",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/tetris.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "zombierush HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/zombierush.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Pacman",
    description: "Your name:‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/PackMan/index (13).html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Pacman",
    description: "Your name:‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/PackMan/index.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "Geometry Dash",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/GeoMentry_Dash/index.html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "eaglercraft | 3kh0",
    description: "Eaglercraft is real Minecraft 1.5.2 that you can play in any regular web browser. That includes school chromebooks, it works on all chromebooks. It supports both singleplayer and multiplayer with no extensions.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/MineCraft/index (3).html",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "paperio2 HTM",
    description: "Paper.io 2 is a sequel to what might be the most popular mobile\n                game played by people from all around the world. Its simple\n          ‚Ä¶",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/paper.io2/paperio2.htm",
    category: "demos",
    highlight: false
  },
  {
    icon: "üìÑ",
    title: "fruitninja HTML",
    description: "Explore this immersive experience.",
    features: [
      "Immersive experience",
      "New dimension",
      "Interactive content"
    ],
    link: "imagine/FruitNinja/fruitninja.html",
    category: "demos",
    highlight: false
  }
];
    </script>

    <div class="filter-bar" id="filterBar">
      <button class="filter-btn active" data-category="all">All</button>
    </div>

    <div class="cards-grid" id="cardsGrid"></div>
  </div>

  
  <div class="human-controls">
    <button id="human-toggle" class="muted" title="Toggle human sound"><span>üîá</span> <span>Human</span></button>
    <select id="human-select" title="Select a human sound"><option value="">Loading...</option></select>
  </div>
  
  <div class="funny-controls">
    <button id="funny-toggle" class="muted" title="Toggle funny sound"><span>üîá</span> <span>Funny</span></button>
    <select id="funny-select" title="Select a funny sound"><option value="">Loading...</option></select>
  </div>
  
  <div class="music-controls">
    <button id="music-toggle" class="muted" title="Toggle lobby music"><span>üîá</span> <span>Music</span></button>
    <select id="song-select" title="Select a song"><option value="">Loading...</option></select>
  </div>
  
  <div class="fx-controls">
    <button id="fx-toggle" class="muted" title="Toggle arcade sound effect"><span>üîá</span> <span>Arcade FX</span></button>
    <select id="fx-select" title="Select an effect"><option value="">Loading...</option></select>
  </div>

  <script>
    // ========== GAME CARDS RENDERING ==========
    (function() {
      const grid = document.getElementById('cardsGrid');
      const filterBar = document.getElementById('filterBar');
      const categories = ['all', ...new Set(cardsData.map(c => c.category).filter(Boolean))];
      filterBar.innerHTML = '';
      categories.forEach(cat => {
        const btn = document.createElement('button');
        btn.className = 'filter-btn' + (cat === 'all' ? ' active' : '');
        btn.setAttribute('data-category', cat);
        btn.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
        btn.addEventListener('click', () => {
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          renderCards(cat);
        });
        filterBar.appendChild(btn);
      });
      function renderCards(category = 'all') {
        const filtered = category === 'all' ? cardsData : cardsData.filter(c => c.category === category);
        if (filtered.length === 0) {
          grid.innerHTML = `<div class="empty-message">‚ú® No games in this dimension yet ‚ú®</div>`;
          return;
        }
        let html = '';
        filtered.forEach(card => {
          const highlightClass = card.highlight ? 'highlight' : '';
          const featuresHtml = card.features.map(f => `<span class="feature-tag">${f}</span>`).join('');
          const link = card.link.startsWith('http') ? card.link : card.link;
          html += `
            <div class="card ${highlightClass}" onclick="window.location.href='${link}'">
              <div class="card-icon">${card.icon || 'üìÅ'}</div>
              <h3 class="card-title">${card.title}</h3>
              <p class="card-desc">${card.description}</p>
              <div class="features">${featuresHtml}</div>
              <a href="${link}" class="card-link" onclick="event.stopPropagation();"><span>‚ñ∂</span> enter</a>
              <span class="category-badge">${card.category || 'demos'}</span>
            </div>
          `;
        });
        grid.innerHTML = html;
      }
      renderCards('all');
    })();

    // ========== AUDIO PLAYER SETUP (with Web Audio) ==========
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    // Resume audio context on first user interaction
    document.body.addEventListener('click', () => {
      if (audioCtx.state === 'suspended') audioCtx.resume();
    }, { once: true });

    // Define players
    const players = [
      { id: 'lobby-music', name: 'Music', toggleId: 'music-toggle', selectId: 'song-select', apiPath: 'audio' },
      { id: 'arcade-fx', name: 'Arcade FX', toggleId: 'fx-toggle', selectId: 'fx-select', apiPath: 'Arcade_FX' },
      { id: 'funny-sounds', name: 'Funny', toggleId: 'funny-toggle', selectId: 'funny-select', apiPath: 'Funny_Sound_Effects' },
      { id: 'human-sounds', name: 'Human', toggleId: 'human-toggle', selectId: 'human-select', apiPath: 'Human_Sounds' }
    ];

    const nodes = {}; // per-channel nodes
    const sendGains = {}; // for reverb/delay sends

    // Create master effects
    const masterGain = audioCtx.createGain();
    const masterCompressor = audioCtx.createDynamicsCompressor();
    masterCompressor.threshold.value = -18;
    masterCompressor.knee.value = 40;
    masterCompressor.ratio.value = 12;
    masterCompressor.attack.value = 0.003;
    masterCompressor.release.value = 0.25;

    // Reverb
    const reverbNode = audioCtx.createConvolver();
    const reverbReturnGain = audioCtx.createGain();
    reverbReturnGain.gain.value = 0;
    // Create impulse response
    const sampleRate = audioCtx.sampleRate;
    const length = sampleRate * 2;
    const impulse = audioCtx.createBuffer(2, length, sampleRate);
    for (let ch = 0; ch < 2; ch++) {
      const data = impulse.getChannelData(ch);
      for (let i = 0; i < length; i++) {
        data[i] = (Math.random() * 2 - 1) * Math.exp(-i / (sampleRate * 0.3));
      }
    }
    reverbNode.buffer = impulse;

    // Delay
    const delayNode = audioCtx.createDelay(2.0);
    delayNode.delayTime.value = 0.3;
    const delayReturnGain = audioCtx.createGain();
    delayReturnGain.gain.value = 0;
    const delayFeedback = audioCtx.createGain();
    delayFeedback.gain.value = 0.3;
    delayNode.connect(delayFeedback);
    delayFeedback.connect(delayNode);

    // Connect master chain
    masterGain.connect(masterCompressor);
    masterCompressor.connect(audioCtx.destination);
    // Reverb send/return
    masterCompressor.connect(reverbNode);
    reverbNode.connect(reverbReturnGain);
    reverbReturnGain.connect(audioCtx.destination);
    // Delay send/return
    masterCompressor.connect(delayNode);
    delayNode.connect(delayReturnGain);
    delayReturnGain.connect(audioCtx.destination);

    // Store master nodes
    const masterNodes = { masterGain, masterCompressor, reverbReturnGain, delayReturnGain };

    // Create per-channel processing
    players.forEach(p => {
      const audio = document.getElementById(p.id);
      const source = audioCtx.createMediaElementSource(audio);

      // Nodes
      const gainNode = audioCtx.createGain();
      const panNode = audioCtx.createStereoPanner();
      const lowEQ = audioCtx.createBiquadFilter();
      lowEQ.type = 'lowshelf';
      lowEQ.frequency.value = 320;
      lowEQ.gain.value = 0;
      const midEQ = audioCtx.createBiquadFilter();
      midEQ.type = 'peaking';
      midEQ.frequency.value = 1000;
      midEQ.Q.value = 1;
      midEQ.gain.value = 0;
      const highEQ = audioCtx.createBiquadFilter();
      highEQ.type = 'highshelf';
      highEQ.frequency.value = 3200;
      highEQ.gain.value = 0;
      const compressor = audioCtx.createDynamicsCompressor();
      compressor.threshold.value = -24;
      compressor.knee.value = 30;
      compressor.ratio.value = 12;
      compressor.attack.value = 0.003;
      compressor.release.value = 0.25;
      const gateGain = audioCtx.createGain(); // simple gate simulation (threshold later)
      gateGain.gain.value = 1;

      // Send gains
      const reverbSend = audioCtx.createGain();
      reverbSend.gain.value = 0;
      const delaySend = audioCtx.createGain();
      delaySend.gain.value = 0;

      // Connect chain: source -> gate -> compressor -> EQ -> pan -> gain -> master
      source.connect(gateGain);
      gateGain.connect(compressor);
      compressor.connect(lowEQ);
      lowEQ.connect(midEQ);
      midEQ.connect(highEQ);
      highEQ.connect(panNode);
      panNode.connect(gainNode);
      gainNode.connect(masterGain);

      // Sends: tap after gain? Usually before fader, but we'll tap after gain for simplicity.
      gainNode.connect(reverbSend);
      gainNode.connect(delaySend);
      reverbSend.connect(reverbNode);
      delaySend.connect(delayNode);

      // Store nodes
      nodes[p.id] = {
        source, gainNode, panNode, lowEQ, midEQ, highEQ, compressor, gateGain,
        reverbSend, delaySend,
        audio, toggleBtn: document.getElementById(p.toggleId), selectEl: document.getElementById(p.selectId)
      };
    });

    // ========== CREATE MIXER UI ==========
    const mixerPanel = document.getElementById('mixerPanel');

    function createChannelUI(playerId, playerName) {
      const n = nodes[playerId];
      const channelDiv = document.createElement('div');
      channelDiv.className = 'mixer-channel';
      channelDiv.innerHTML = `
        <div class="channel-header">${playerName}</div>
        <div class="control-row">
          <span class="control-label">Vol</span>
          <input type="range" min="0" max="100" value="100" class="volume-slider">
        </div>
        <div class="control-row">
          <span class="control-label">Pan</span>
          <input type="range" min="-100" max="100" value="0" class="pan-slider">
        </div>
        <div class="eq-row">
          <div class="eq-band">
            <span>L</span>
            <input type="range" min="-20" max="20" value="0" class="eq-low">
          </div>
          <div class="eq-band">
            <span>M</span>
            <input type="range" min="-20" max="20" value="0" class="eq-mid">
          </div>
          <div class="eq-band">
            <span>H</span>
            <input type="range" min="-20" max="20" value="0" class="eq-high">
          </div>
        </div>
        <div class="control-row">
          <span class="control-label">Reverb</span>
          <input type="range" min="0" max="100" value="0" class="reverb-send">
        </div>
        <div class="control-row">
          <span class="control-label">Delay</span>
          <input type="range" min="0" max="100" value="0" class="delay-send">
        </div>
        <div class="control-row">
          <span class="control-label">Comp</span>
          <input type="range" min="-40" max="0" value="-24" class="comp-thresh">
        </div>
        <div class="control-row">
          <span class="control-label">Gate</span>
          <input type="range" min="0" max="1" step="0.01" value="0" class="gate-thresh">
        </div>
        <div class="button-group">
          <button class="mixer-btn mute-btn">M</button>
          <button class="mixer-btn solo-btn">S</button>
          <button class="mixer-btn random-btn">üé≤</button>
        </div>
      `;
      mixerPanel.appendChild(channelDiv);

      // Connect sliders
      const volSlider = channelDiv.querySelector('.volume-slider');
      volSlider.addEventListener('input', () => {
        n.gainNode.gain.value = volSlider.value / 100;
      });

      const panSlider = channelDiv.querySelector('.pan-slider');
      panSlider.addEventListener('input', () => {
        n.panNode.pan.value = panSlider.value / 100;
      });

      const eqLow = channelDiv.querySelector('.eq-low');
      eqLow.addEventListener('input', () => {
        n.lowEQ.gain.value = eqLow.value;
      });

      const eqMid = channelDiv.querySelector('.eq-mid');
      eqMid.addEventListener('input', () => {
        n.midEQ.gain.value = eqMid.value;
      });

      const eqHigh = channelDiv.querySelector('.eq-high');
      eqHigh.addEventListener('input', () => {
        n.highEQ.gain.value = eqHigh.value;
      });

      const reverbSend = channelDiv.querySelector('.reverb-send');
      reverbSend.addEventListener('input', () => {
        n.reverbSend.gain.value = reverbSend.value / 100;
      });

      const delaySend = channelDiv.querySelector('.delay-send');
      delaySend.addEventListener('input', () => {
        n.delaySend.gain.value = delaySend.value / 100;
      });

      const compThresh = channelDiv.querySelector('.comp-thresh');
      compThresh.addEventListener('input', () => {
        n.compressor.threshold.value = compThresh.value;
      });

      const gateThresh = channelDiv.querySelector('.gate-thresh');
      gateThresh.addEventListener('input', () => {
        // Very simple gate: if threshold > 0, we attenuate based on input level? Too complex.
        // We'll just simulate: if gateThresh > 0, we reduce gain by factor. Not accurate.
        // For demo, we'll leave it as a placeholder.
        // In a real gate, you'd need an envelope follower.
      });

      const muteBtn = channelDiv.querySelector('.mute-btn');
      muteBtn.addEventListener('click', () => {
        if (n.gainNode.gain.value === 0) {
          n.gainNode.gain.value = 1;
          muteBtn.classList.remove('active');
        } else {
          n.gainNode.gain.value = 0;
          muteBtn.classList.add('active');
        }
      });

      const soloBtn = channelDiv.querySelector('.solo-btn');
      soloBtn.addEventListener('click', () => {
        const isSolo = soloBtn.classList.contains('active');
        if (isSolo) {
          soloBtn.classList.remove('active');
          // Restore all gains to previous values? We'll just set all to 1 (simplified)
          Object.values(nodes).forEach(n => n.gainNode.gain.value = 1);
        } else {
          // Solo this channel
          document.querySelectorAll('.solo-btn').forEach(btn => btn.classList.remove('active'));
          soloBtn.classList.add('active');
          Object.values(nodes).forEach((n, idx) => {
            if (n.audio.id === playerId) {
              n.gainNode.gain.value = 1;
            } else {
              n.gainNode.gain.value = 0;
            }
          });
        }
      });

      const randomBtn = channelDiv.querySelector('.random-btn');
      randomBtn.addEventListener('click', () => {
        const selectEl = n.selectEl;
        if (selectEl && selectEl.options.length > 1) {
          const randomIndex = Math.floor(Math.random() * (selectEl.options.length - 1)) + 1;
          selectEl.selectedIndex = randomIndex;
          selectEl.dispatchEvent(new Event('change'));
        }
      });
    }

    // Create channels
    createChannelUI('lobby-music', 'MUSIC');
    createChannelUI('arcade-fx', 'ARCADE');
    createChannelUI('funny-sounds', 'FUNNY');
    createChannelUI('human-sounds', 'HUMAN');

    // Master channel
    const masterDiv = document.createElement('div');
    masterDiv.className = 'mixer-channel master-channel';
    masterDiv.innerHTML = `
      <div class="channel-header">MASTER</div>
      <div class="control-row">
        <span class="control-label">Vol</span>
        <input type="range" min="0" max="100" value="100" id="master-vol">
      </div>
      <div class="control-row">
        <span class="control-label">Comp</span>
        <input type="range" min="-40" max="0" value="-18" id="master-comp-thresh">
      </div>
      <div class="control-row">
        <span class="control-label">Reverb</span>
        <input type="range" min="0" max="100" value="0" id="master-reverb">
      </div>
      <div class="control-row">
        <span class="control-label">Delay</span>
        <input type="range" min="0" max="100" value="0" id="master-delay">
      </div>
      <div class="button-group">
        <button class="mixer-btn" id="master-mute">M</button>
      </div>
    `;
    mixerPanel.appendChild(masterDiv);

    // Master controls
    const masterVol = document.getElementById('master-vol');
    masterVol.addEventListener('input', () => {
      masterNodes.masterGain.gain.value = masterVol.value / 100;
    });

    const masterCompThresh = document.getElementById('master-comp-thresh');
    masterCompThresh.addEventListener('input', () => {
      masterNodes.masterCompressor.threshold.value = masterCompThresh.value;
    });

    const masterReverb = document.getElementById('master-reverb');
    masterReverb.addEventListener('input', () => {
      masterNodes.reverbReturnGain.gain.value = masterReverb.value / 100;
    });

    const masterDelay = document.getElementById('master-delay');
    masterDelay.addEventListener('input', () => {
      masterNodes.delayReturnGain.gain.value = masterDelay.value / 100;
    });

    const masterMute = document.getElementById('master-mute');
    masterMute.addEventListener('click', () => {
      if (masterNodes.masterGain.gain.value === 0) {
        masterNodes.masterGain.gain.value = 1;
        masterMute.classList.remove('active');
      } else {
        masterNodes.masterGain.gain.value = 0;
        masterMute.classList.add('active');
      }
    });

    // ========== PLAYER LOADING (same as before) ==========
    function createPlayer(audioId, toggleId, selectId, apiPath, defaultName = 'Default') {
      const audio = document.getElementById(audioId);
      const toggleBtn = document.getElementById(toggleId);
      const selectEl = document.getElementById(selectId);
      let isPlaying = false;
      let playlist = [];
      let currentIndex = 0;

      const apiUrl = `https://api.github.com/repos/sussybocca/PackArcade/contents/public/${apiPath}`;

      async function loadPlaylist() {
        try {
          const response = await fetch(apiUrl);
          if (!response.ok) throw new Error('GitHub API error');
          const data = await response.json();
          const mp3Files = data.filter(item => item.name.toLowerCase().endsWith('.mp3'));
          if (mp3Files.length === 0) throw new Error('No MP3 files found');
          playlist = mp3Files.map(file => ({
            name: file.name.replace(/\.mp3$/i, ''),
            url: `https://raw.githubusercontent.com/sussybocca/PackArcade/main/public/${apiPath}/${encodeURIComponent(file.name)}`
          }));
          selectEl.innerHTML = '';
          playlist.forEach((item, index) => {
            const option = document.createElement('option');
            option.value = index;
            option.textContent = item.name;
            selectEl.appendChild(option);
          });
          currentIndex = 0;
          audio.src = playlist[0].url;
          audio.load();
          toggleBtn.disabled = false;
          selectEl.disabled = false;
        } catch (error) {
          console.warn(`Failed to load ${apiPath}:`, error);
          playlist = [{ name: defaultName, url: `${apiPath}/default.mp3` }];
          selectEl.innerHTML = `<option value="0">${defaultName} (fallback)</option>`;
          audio.src = playlist[0].url;
          audio.load();
        }
      }

      selectEl.addEventListener('change', () => {
        const index = parseInt(selectEl.value, 10);
        if (!isNaN(index) && playlist[index]) {
          currentIndex = index;
          audio.src = playlist[currentIndex].url;
          audio.load();
          if (isPlaying) {
            audio.play().catch(e => console.warn('Play after change failed:', e));
          }
        }
      });

      toggleBtn.addEventListener('click', () => {
        if (isPlaying) {
          audio.pause();
          toggleBtn.innerHTML = toggleBtn.innerHTML.replace('üîä', 'üîá');
          isPlaying = false;
        } else {
          audio.play()
            .then(() => {
              toggleBtn.innerHTML = toggleBtn.innerHTML.replace('üîá', 'üîä');
              isPlaying = true;
            })
            .catch(e => {
              console.warn('Play failed:', e);
              toggleBtn.style.display = 'none';
            });
        }
      });

      loadPlaylist();
    }

    createPlayer('lobby-music', 'music-toggle', 'song-select', 'audio', 'LobbyMusic');
    createPlayer('arcade-fx', 'fx-toggle', 'fx-select', 'Arcade_FX', 'DefaultFX');
    createPlayer('funny-sounds', 'funny-toggle', 'funny-select', 'Funny_Sound_Effects', 'DefaultFunny');
    createPlayer('human-sounds', 'human-toggle', 'human-select', 'Human_Sounds', 'DefaultHuman');
  </script>
</body>
</html>
